{"author":{"id":"3998add589f6a09cf4bdf0e85e5481d2c48b8a757edd699a79a0c929ab5005db"},"ops":[{"type":3,"timestamp":1654514227,"nonce":"Je3Jpnh6gXnQrvGKEEYCiUy9fVo=","metadata":{"github-id":"IC_kwDOCGKeh85EYvgY","github-url":"https://github.com/git-bug/git-bug/issues/809#issuecomment-1147336728"},"message":"\u003e Here's an instance of a test repo that's created but missing the code to properly close it after the test is complete - this might be contributing to the above described problem:\n\u003e \n\u003e https://github.com/MichaelMure/git-bug/blob/96327c3371ca762d906209c6114092bbf552c0f4/cache/repo_cache_test.go#L223\n\nThis looks like a real issue.\n\n\u003e This test utility function creates three repo without closing them:\n\u003e \n\u003e https://github.com/MichaelMure/git-bug/blob/96327c3371ca762d906209c6114092bbf552c0f4/entity/dag/common_test.go#L106\n\nI think this one is OK because each time this function is used, `defer repository.CleanupTestRepos(repoA, repoB, remote)` is called. Admittedly, that might be better to register the removal with `t.Cleanup()` directly as it's made exactly for that.\n\nThat said, looking again at that code, it seems that there is a bunch of case where `cache.NewRepoCache(repo)` is called, but the cache is never closed after that. As we have seen, that might cause problems on windows especially.","files":null}]}