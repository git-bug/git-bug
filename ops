{"author":{"id":"3998add589f6a09cf4bdf0e85e5481d2c48b8a757edd699a79a0c929ab5005db"},"ops":[{"type":3,"timestamp":1536245735,"nonce":"WskYLY4KME+gT20Oenk9ljGiuVY=","metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQxOTEyNTAxOQ==","github-url":"https://github.com/git-bug/git-bug/issues/5#issuecomment-419125019"},"message":"That's a good point, I'll check the repo size as well, before and after a `git gc`.","files":null},{"type":3,"timestamp":1536264512,"nonce":"XCFj4wSfy/QyhAROsbDiw9/fvRc=","metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQxOTIyNDU0OA==","github-url":"https://github.com/git-bug/git-bug/issues/5#issuecomment-419224548"},"message":"Alright, another run with the size of the repo before and after a `git gc` (initial empty size substracted), 1000 OperationPack serialized:\n\n```\nGOB\nCreating repo: /tmp/272689118\nraw: 4446, git: 1944, ratio: 43.724697%\nraw: 4774, git: 2075, ratio: 43.4646%\nraw: 5075, git: 2203, ratio: 43.408867%\nraw: 4135, git: 1795, ratio: 43.409916%\nraw: 5901, git: 2437, ratio: 41.298084%\nraw: 2919, git: 1372, ratio: 47.0024%\nraw: 4974, git: 2098, ratio: 42.179333%\nraw: 5074, git: 2153, ratio: 42.432007%\nraw: 3600, git: 1613, ratio: 44.805557%\nraw: 4663, git: 2016, ratio: 43.23397%\n...\nUnpacked: 1926463\nGC packed: 1926510\nPacking diff: 47\nGC packed aggressive: 1926510\nPacking diff: 0\n\nJSON\nCreating repo: /tmp/263735205\nraw: 4094, git: 1706, ratio: 41.67074%\nraw: 4428, git: 1837, ratio: 41.485996%\nraw: 4731, git: 1968, ratio: 41.597973%\nraw: 3776, git: 1547, ratio: 40.96928%\nraw: 5554, git: 2192, ratio: 39.467052%\nraw: 2566, git: 1136, ratio: 44.27124%\nraw: 4628, git: 1863, ratio: 40.254967%\nraw: 4732, git: 1921, ratio: 40.595943%\nraw: 3242, git: 1377, ratio: 42.47378%\nraw: 4320, git: 1773, ratio: 41.041668%\n...\nUnpacked: 1687200\nGC packed: 1687247\nPacking diff: 47\nGC packed aggressive: 1687247\nPacking diff: 0\n\nCBOR\nCreating repo: /tmp/701783232\nraw: 3984, git: 1705, ratio: 42.796185%\nraw: 4311, git: 1838, ratio: 42.63512%\nraw: 4613, git: 1965, ratio: 42.597008%\nraw: 3674, git: 1550, ratio: 42.18835%\nraw: 5438, git: 2192, ratio: 40.308937%\nraw: 2462, git: 1134, ratio: 46.060116%\nraw: 4514, git: 1863, ratio: 41.2716%\nraw: 4613, git: 1916, ratio: 41.534794%\nraw: 3137, git: 1376, ratio: 43.863564%\nraw: 4202, git: 1766, ratio: 42.027603%\n...\nUnpacked: 1685158\nGC packed: 1685205\nPacking diff: 47\nGC packed aggressive: 1685205\nPacking diff: 0\n\nMsgPack\nCreating repo: /tmp/132917535\nraw: 3984, git: 1723, ratio: 43.247993%\nraw: 4310, git: 1854, ratio: 43.01624%\nraw: 4611, git: 1985, ratio: 43.049232%\nraw: 3672, git: 1562, ratio: 42.538128%\nraw: 5436, git: 2204, ratio: 40.544518%\nraw: 2460, git: 1152, ratio: 46.82927%\nraw: 4512, git: 1875, ratio: 41.55585%\nraw: 4614, git: 1932, ratio: 41.872562%\nraw: 3138, git: 1395, ratio: 44.455067%\nraw: 4202, git: 1783, ratio: 42.432175%\n...\nUnpacked: 1700178\nGC packed: 1700225\nPacking diff: 47\nGC packed aggressive: 1700225\nPacking diff: 0\n```\n\nWhatever the format, there is no compression taking advantage of the similarity between each OperationPack. The packed repo is actually bigger by 47 bytes, and a `git gc --agressive` does nothing.","files":null},{"type":3,"timestamp":1536265389,"nonce":"ztUYABDacnA1EqZ1H57DPeaO25A=","metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQxOTIyODY3Mg==","github-url":"https://github.com/git-bug/git-bug/issues/5#issuecomment-419228672"},"message":"Another run with 100k OperationPack (so 500k operations), just for the sake of it:\n\n```\nGOB\nCreating repo: /tmp/235087672\nraw: 3231, git: 1492, ratio: 46.177654%\nraw: 4688, git: 2097, ratio: 44.731228%\nraw: 3611, git: 1625, ratio: 45.001385%\nraw: 3566, git: 1620, ratio: 45.42905%\nraw: 3911, git: 1718, ratio: 43.927383%\nraw: 6047, git: 2526, ratio: 41.77278%\nraw: 3487, git: 1595, ratio: 45.741325%\nraw: 5425, git: 2267, ratio: 41.788017%\nraw: 3013, git: 1341, ratio: 44.507137%\nraw: 6101, git: 2549, ratio: 41.780037%\n...\nUnpacked: 194 MB\nGC packed: 194 MB\nPacking diff: 47\nGC packed aggressive: 194 MB\nPacking diff: 0\n\nJSON\nCreating repo: /tmp/145768759\nraw: 2870, git: 1261, ratio: 43.937283%\nraw: 4332, git: 1842, ratio: 42.520775%\nraw: 3248, git: 1398, ratio: 43.041874%\nraw: 3215, git: 1392, ratio: 43.297047%\nraw: 3553, git: 1485, ratio: 41.795666%\nraw: 5699, git: 2280, ratio: 40.00702%\nraw: 3130, git: 1356, ratio: 43.32268%\nraw: 5083, git: 2032, ratio: 39.97639%\nraw: 2660, git: 1119, ratio: 42.06767%\nraw: 5753, git: 2301, ratio: 39.99652%\n...\nUnpacked: 170 MB\nGC packed: 170 MB\nPacking diff: 47\nGC packed aggressive: 170 MB\nPacking diff: 0\n\nCBOR\nCreating repo: /tmp/170025770\nraw: 2773, git: 1255, ratio: 45.257843%\nraw: 4227, git: 1851, ratio: 43.789925%\nraw: 3149, git: 1395, ratio: 44.299778%\nraw: 3107, git: 1395, ratio: 44.898617%\nraw: 3448, git: 1480, ratio: 42.92343%\nraw: 5587, git: 2284, ratio: 40.880615%\nraw: 3027, git: 1363, ratio: 45.02808%\nraw: 4964, git: 2030, ratio: 40.89444%\nraw: 2558, git: 1113, ratio: 43.510555%\nraw: 5641, git: 2300, ratio: 40.77291%\n...\nUnpacked: 170 MB\nGC packed: 170 MB\nPacking diff: 47\nGC packed aggressive: 170 MB\nPacking diff: 0\n\nMsgPack\nCreating repo: /tmp/418211457\nraw: 2778, git: 1272, ratio: 45.788338%\nraw: 4228, git: 1868, ratio: 44.181644%\nraw: 3150, git: 1409, ratio: 44.73016%\nraw: 3109, git: 1408, ratio: 45.287876%\nraw: 3447, git: 1495, ratio: 43.371048%\nraw: 5587, git: 2302, ratio: 41.202793%\nraw: 3026, git: 1379, ratio: 45.571712%\nraw: 4965, git: 2041, ratio: 41.107754%\nraw: 2562, git: 1125, ratio: 43.911007%\nraw: 5641, git: 2316, ratio: 41.05655%\n...\nUnpacked: 171 MB\nGC packed: 171 MB\nPacking diff: 47\nGC packed aggressive: 171 MB\nPacking diff: 0\n```","files":null}]}