{"author":{"id":"76205689b27d98fb23434ef037a339548597cc5e47be1e2c87a48ce64ff8b55a"},"ops":[{"type":1,"timestamp":1594142606,"nonce":"ydTgVWQFCyFgIAUrBar61eI0XOY=","metadata":{"github-id":"MDU6SXNzdWU2NTI0OTIyMDY=","github-url":"https://github.com/git-bug/git-bug/issues/420","origin":"github"},"title":"Segfault when running git bug add","message":"Hello,\n\nWhen running `git bug add` in a repository I get the following segfault.\n\n```\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x811362]\n\ngoroutine 1 [running]:\ngithub.com/MichaelMure/git-bug/cache.(*RepoCache).GetPath(0x0, 0xc000172100, 0x2)\n\t[...]/git-bug/cache/repo_cache.go:122 +0x22\ngithub.com/MichaelMure/git-bug/input.launchEditorWithTemplate(0xdaaf40, 0x0, 0xc5df13, 0x13, 0xc00023c0c0, 0xb6, 0xb6, 0xc00033c000, 0xc000155c60, 0xc00028ec00)\n\t[...]/git-bug/input/input.go:242 +0x49\ngithub.com/MichaelMure/git-bug/input.BugCreateEditorInput(0xdaaf40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1273b80, 0x0, 0xc000340000, 0x0, ...)\n\t[...]/git-bug/input/input.go:45 +0x13e\ngithub.com/MichaelMure/git-bug/commands.runAdd(0xc0000ddd80, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xa995f1, 0x7f1b58384098)\n\t[...]/git-bug/commands/add.go:52 +0xc6\ngithub.com/MichaelMure/git-bug/commands.newAddCommand.func1(0xc0000ec840, 0x12729b0, 0x0, 0x0, 0x0, 0x0)\n\t[...]/git-bug/commands/add.go:25 +0x66\ngithub.com/spf13/cobra.(*Command).execute(0xc0000ec840, 0x12729b0, 0x0, 0x0, 0xc0000ec840, 0x12729b0)\n\t/home/gustav/go/pkg/mod/github.com/spf13/cobra@v1.0.0/command.go:842 +0x453\ngithub.com/spf13/cobra.(*Command).ExecuteC(0xc0000ec580, 0x0, 0x0, 0x0)\n\t/home/gustav/go/pkg/mod/github.com/spf13/cobra@v1.0.0/command.go:950 +0x349\ngithub.com/spf13/cobra.(*Command).Execute(...)\n\t/home/gustav/go/pkg/mod/github.com/spf13/cobra@v1.0.0/command.go:887\ngithub.com/MichaelMure/git-bug/commands.Execute()\n\t[...]/git-bug/commands/root.go:87 +0x27\nmain.main()\n\t[...]/git-bug/git-bug.go:11 +0x20\n```\n\nWith git bisect I have traced this to commit 536c290d from #414.\n\ngo version and `uname` since I guess it's not present for everyone.\n\n```\n$ go version\ngo version go1.14.4 linux/amd64\n$ uname -a\nLinux archlinux 5.7.7-arch1-1 #1 SMP PREEMPT Wed, 01 Jul 2020 14:53:16 +0000 x86_64 GNU/Linux\n```\n\nThis is the complete output.\n\n```\n~ $ git init git-bug\nInitialized empty Git repository in /home/gustav/git-bug/.git/\n~ $ cd git-bug\n~/git-bug $ git bug user create\nBuilding identity cache... Done.\nBuilding bug cache... Done.\nName [Gustav Sörnäs]:\nEmail [gustav@sornas.net]:\nAvatar URL:\n\n646cf53470e3a2abee74d5547ccad924a5fafbf2\n~/git-bug $ git bug add\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x814f42]\n\n[trace from above]\n```\n\nMore interesting behavior:\n```\n~/git-bug $ time git bug ls\ngit bug ls  0.01s user 0.01s system 0% cpu 5.017 total\n```\nCompared to tag 0.7.1:\n```\n~/git-bug $ time git bug-rel ls\ngit bug-rel ls  0.01s user 0.01s system 111% cpu 0.014 total\n```","files":null}]}