{"author":{"id":"c63f70c3d797d1c7b6ed566d510a7f73681c3bd0c557ab6d5086a193a026cb02"},"ops":[{"type":1,"timestamp":1669016534,"nonce":"DssSntFzEbRL1zvmyWVBf7tx0W8=","metadata":{"github-id":"I_kwDOCGKeh85W3ygR","github-url":"https://github.com/git-bug/git-bug/issues/926","origin":"github"},"title":"tests fails under interactive shell (color issue)","message":"Hey there,\n\nLooks like with my regular shell setup the tests fails. I have the issue with abuild (Alpine Linux) or with regular make test. I guess as an interactive shell, some git commands output are colored (a magenta \"John Doe\").\n\n\n```\n=== RUN   TestCommentAdd\nBuilding identity cache... Done.\nBuilding bug cache... Done.\n    comment_add_test.go:32: \n        \tError Trace:\t/home/willow/sources/git-bug/commands/comment_test.go:151\n        \t           \t\t\t\t/home/willow/sources/git-bug/commands/comment_add_test.go:32\n        \tError:      \tNot equal: \n        \t           \texpected: \"John Doe\"\n        \t           \tactual  : \"\\x1b[35mJohn Doe\\x1b[0m\"\n        \t           \t\n        \t           \tDiff:\n        \t           \t--- Expected\n        \t           \t+++ Actual\n        \t           \t@@ -1 +1 @@\n        \t           \t-John Doe\n        \t           \t+John Doe\n        \tTest:       \tTestCommentAdd\n--- FAIL: TestCommentAdd (0.02s)\n=== RUN   TestCommentEdit\nBuilding identity cache... Done.\nBuilding bug cache... Done.\n    comment_edit_test.go:17: \n        \tError Trace:\t/home/willow/sources/git-bug/commands/comment_edit_test.go:17\n        \tError:      \tReceived unexpected error:\n        \t           \tcomment doesn't exist\n        \tTest:       \tTestCommentEdit\n--- FAIL: TestCommentEdit (0.03s)\n=== RUN   TestComment\nBuilding identity cache... Done.\nBuilding bug cache... Done.\n    comment_test.go:20: \n        \tError Trace:\t/home/willow/sources/git-bug/commands/comment_test.go:151\n        \t           \t\t\t\t/home/willow/sources/git-bug/commands/comment_test.go:20\n        \tError:      \tNot equal: \n        \t           \texpected: \"John Doe\"\n        \t           \tactual  : \"\\x1b[35mJohn Doe\\x1b[0m\"\n        \t           \t\n        \t           \tDiff:\n        \t           \t--- Expected\n        \t           \t+++ Actual\n        \t           \t@@ -1 +1 @@\n        \t           \t-John Doe\n        \t           \t+John Doe\n        \tTest:       \tTestComment\n--- FAIL: TestComment (0.02s)\n``` \n\nI successfully built and test with piping \"make test | less\".","files":null}]}