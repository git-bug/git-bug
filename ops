{"author":{"id":"d82e3b0277388fab1285e702dfba0ce3b709e1919233977abaeab636c4c57550"},"ops":[{"type":3,"timestamp":1654167360,"nonce":"J+Swt1piUqOQKu8wPCJp3ptwTdo=","metadata":{"github-id":"IC_kwDOCGKeh85EOyEi","github-url":"https://github.com/git-bug/git-bug/issues/809#issuecomment-1144725794"},"message":"Here's an instance of a test repo that's created but missing the code to properly close it after the test is complete - this might be contributing to the above described problem:\n\nhttps://github.com/MichaelMure/git-bug/blob/96327c3371ca762d906209c6114092bbf552c0f4/cache/repo_cache_test.go#L223","files":null},{"type":3,"timestamp":1654167615,"nonce":"k6Q45Ih+uurjRhZCBKyqW/N563g=","metadata":{"github-id":"IC_kwDOCGKeh85EOy9e","github-url":"https://github.com/git-bug/git-bug/issues/809#issuecomment-1144729438"},"message":"This test utility function creates three repo without closing them:\n\nhttps://github.com/MichaelMure/git-bug/blob/96327c3371ca762d906209c6114092bbf552c0f4/entity/dag/common_test.go#L106","files":null},{"type":3,"timestamp":1654347689,"nonce":"VxNA56rlPPyV/H+wgS1Wmvp/Z2U=","metadata":{"github-id":"IC_kwDOCGKeh85EV87b","github-url":"https://github.com/git-bug/git-bug/issues/809#issuecomment-1146605275"},"message":"I've got a very crufty branch I've been using for testing that includes 30-40 tests which include `t.Parallel()`.  With these changes, the Windows build failed almost every time.\n\nI then refactored the entire test suite to exclusively use `t.TempDir()` (with its built-in OS friendly version of `removeAll()`) and `t.Cleanup()`.  After these changes, tests on Windows builds seem to be failing about once in 30 runs.\n\nI've created #810, to describe a couple (final?) places we could end up with blocking behavior and will tackle those before returning to this issue.","files":null}]}