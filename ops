{"author":{"id":"cbe37bfa425144b423e895a48093f3694baf36d3afa87b5712cf48abbbd13a7c"},"ops":[{"type":6,"timestamp":1720988508,"nonce":"LeGCAWi2JyRlLjzcDPitMI3Xjk4=","metadata":{"github-id":"UCE_lAHOCGKeh86PgJcJzl-rnyQ"},"target":"715c0be1d4903d152c24c13e300c59f89f6de851604f4ba3a0abe255a6667eb3","message":"(originally dealt with as https://github.com/go-git/go-git/issues/489, but it is really a different bug, Cc: @MichaelMure , @pjbgf).\n\nOriginal issue report was:\n\nJust prepared a reproducer for my colleague:\n\nThis is my local git repo https://mcepl.fedorapeople.org/tmp/wikipediafs-repo.tar.xz, using https://github.com/MichaelMure/git-bug/releases/download/v0.8.0/git-bug_linux_amd64, and then when I run:\n\n```\ntumbleweed-pkg~/r/wikipediafs (master)$ /tmp/git-bug_linux_amd64 ls \na1403a8\topen\tbytes/str mess when converted to Py3              \tMatěj Cepl     \t\nd3b7005\topen\tproposal for improvement by mobiphil              \tMatěj Cepl     \t\ntumbleweed-pkg~/r/wikipediafs (master)$ git remote -v\nmyrepo\thttps://git.cepl.eu/cgit/toys/wikipediafs (fetch)\nmyrepo\tredcrew:/srv/git/toys/wikipediafs.git (push)\nsourcehut\thttps://git.sr.ht/~mcepl/wikipediafs (fetch)\nsourcehut\tgit@git.sr.ht:~mcepl/wikipediafs (push)\ntumbleweed-pkg~/r/wikipediafs (master)$ /tmp/git-bug_linux_amd64 push sourcehut\nError: authorization failed\ntumbleweed-pkg~/r/wikipediafs (master)$ \n```\n\n(if you want R/W access to the sourcehut repo, let me know your sourcehut username, but I can reproduce exactly the same with https://git.cepl.eu/cgit/toys/wikipediafs/ where it is just `openssh-server-5.3p1-124.el6_10.x86_64` and `git-1.7.1-10.el6_10.x86_64` on an ancient CentOS 6).\n\nObviously, `git push --all sourcehut` works perfectly.\n\n-----\n\nThen, @pjbgf [suspected](https://github.com/go-git/go-git/issues/489#issuecomment-2227122845) that I was using outdated go-git version. So, this is the result:\n\nI will look into rebuilding git-bug with revendored dependencies later, but just to note that the reproduction I showed here (and sorry about the formatting, GitHub cannot parse Markdown from emails) was against Sourcehut and I don't think they use obsolete software there (they may use `libgit2`, or something else than the canonical `git` binary).\n\nand\n\nWhen including [this commit](https://git.cepl.eu/cgit/git/git-bug/commit/?id=2b5ce3d2a8ef5685a8fe12a2ab4975ad8fe7a6e2) on the top of the current master, I get [this binary](https://mcepl.fedorapeople.org/tmp/git-bug) for Linux/x86_64. With that I get exactly the same problem:\n\n```sh\ntumbleweed-pkg~/r/wikipediafs (master)$ git remote -v\nmyrepo\thttps://git.cepl.eu/cgit/toys/wikipediafs (fetch)\nmyrepo\tredcrew:/srv/git/toys/wikipediafs.git (push)\nsourcehut\thttps://git.sr.ht/~mcepl/wikipediafs (fetch)\nsourcehut\tgit@git.sr.ht:~mcepl/wikipediafs (push)\ntumbleweed-pkg~/r/wikipediafs (master)$ git bug push sourcehut \nError: authorization failed\ntumbleweed-pkg~/r/wikipediafs (master)$ \n```\n\n(again, trying to push to Sourcehut to eliminate any possible problems with obsolete versions of software on my server)\n\n@MichaelMure, is it possible to get some kind of debugging or verbose information?\n\n------\n\nAlso `echo '0009done' | ssh git@git.sr.ht git-upload-pack /~mcepl/wikipediafs` reports `agent=git/2.43.4`.","files":null}]}