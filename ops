{"author":{"id":"6ab7d646424c4534c5c080f03caf9b4756d2d6ba7d42a9cbbeb216d5885e3595"},"ops":[{"type":1,"timestamp":1722433238,"nonce":"tHl7JbnMgYM0EOy0HXIV2nZSr0o=","metadata":{"github-id":"I_kwDOCGKeh86RcN5O","github-url":"https://github.com/git-bug/git-bug/issues/1211","origin":"github"},"title":"Issue running the example_test.go","message":"Hi y'all, I'm really excited to try using git-bug as a backend for a personal project, but I'm getting a bit stuck on how the operations should work.\n\nI've tried both v0.8.0 and `master` but both fail to unmarshal the identity in the operation. (I've copied the `example_test.go` to my own project, set the package to `main`, and renamed the test function to `main` as well. `go get github.com/MichaelMure/git-bug/entity` was run to fetch the deps)\n\n```\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xb3db9c]\n\ngoroutine 1 [running]:\nmain.main()\n        /home/user/arbeit/emc/projects/testing/example.go:338 +0x89c\nexit status 2\n```\n\nAdding some debugging in relevant places makes it clear\n\n```diff\ndiff --git a/example.go b/example.go\nindex 3899be1..15c3c15 100644\n--- a/example.go\n+++ b/example.go\n@@ -328,11 +328,20 @@ func main() {\n        confRene.Append(NewSetSignatureRequired(rene, true))\n \n        // Rene commits on its own repo\n-       _ = confRene.Commit(repoRene)\n+       err := confRene.Commit(repoRene)\n+       if err != nil {\n+               panic(err)\n+       }\n \n        // Isaac pull and read the config\n-       _ = dag.Pull(def, wrapper, repoIsaac, simpleResolvers(repoIsaac), \"origin\", isaac)\n-       confIsaac, _ := Read(repoIsaac, confRene.Id())\n+       err = dag.Pull(def, wrapper, repoIsaac, simpleResolvers(repoIsaac), \"origin\", isaac)\n+       if err != nil {\n+               panic(err)\n+       }\n+       confIsaac, err := Read(repoIsaac, confRene.Id())\n+       if err != nil {\n+               panic(err)\n+       }\n \n        // Compile gives the current state of the config\n```\n\nwith the error:\n\n```\npanic: merge failure: remote project config is not readable: json: cannot unmarshal object into Go struct field AddAdministrator.to_add of type identity.Interface\n\ngoroutine 1 [running]:\nmain.main()\n        /home/user/arbeit/emc/projects/testing/example.go:339 +0xc28\nexit status 2\n```\n\nit seems like this is possibly due to https://github.com/MichaelMure/git-bug/blob/3297223022630bd3aac2d119ae0870c995a7da2e/entities/identity/identity.go#L85\n\nAny suggestions or would it be possible that this example could be updated to function again?","files":null}]}