{"author":{"id":"8280890c639b421e6b9dcf2035bdf915ac11c1cf0e1f9dd00b2f6437faa22719"},"ops":[{"type":1,"timestamp":1667496152,"nonce":"LoRDBJtsbAHZyiiKC3xqpuxqSz0=","metadata":{"github-id":"I_kwDOCGKeh85ViK-X","github-url":"https://github.com/git-bug/git-bug/issues/911","origin":"github"},"title":"invalid tree, missing the root entry \u003e git-bug-migration \u003e unknown cache format version 4","message":"Hi,\n\nAfter upgrading to git-bug (v0.7.2) , I got the following error : \n\n    $ git bug ls\n    invalid tree, missing the root entry\n\nI then tried to run git-bug-migration (v0.3.1)\n\nI got the following errors\n\n```\n$ git-bug-migration --for-real\nMigration #1\nPurpose: Convert legacy identities into a complete data structure in git\n\nskipping identity, already updated\ngot error when reading bug, assuming data is already migrated: \"invalid tree, missing the root entry\"\ngot error when reading bug, assuming data is already migrated: \"invalid tree, missing the root entry\"\n\n\nMigration #2\nPurpose: Migrate bridge credentials from the global git config to a keyring\n\n\n\nMigration #3\nPurpose: Make bug and identities independent from the storage by making the ID generation self-contained. Also, migrate to the new full DAG entity data model.\n\nskipping bug, already updated\ngot error when reading bug, assuming data is already migrated: \"invalid tree, missing the root entry\"\npanic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0xaa4f75]\n\ngoroutine 1 [running]:\ngithub.com/MichaelMure/git-bug-migration/migration3/after/identity.(*Identity).Id(...)\n        /home/dtrckd/src/i/git-bug-migration/migration3/after/identity/identity.go:478\ngithub.com/MichaelMure/git-bug-migration/migration3/after/identity.SetUserIdentity({0x7fe94137a8a0, 0xc000189c20}, 0x0)\n        /home/dtrckd/src/i/git-bug-migration/migration3/after/identity/identity_user.go:15 +0x35\ngithub.com/MichaelMure/git-bug-migration/migration3.(*Migration3).migrate(0xc0001c6550, {0xd69710, 0xc000414480}, {0xd6aba8, 0xc000189c20})\n        /home/dtrckd/src/i/git-bug-migration/migration3/migration3.go:110 +0xa12\ngithub.com/MichaelMure/git-bug-migration/migration3.(*Migration3).Run(0xd42ca0, {0xc0001c6550, 0x41})\n        /home/dtrckd/src/i/git-bug-migration/migration3/migration3.go:36 +0x8e\nmain.runRootCmd(0xc00040c6c0, {0xc8}, {0xc00040c6f0, 0x3, 0x0})\n        /home/dtrckd/src/i/git-bug-migration/root.go:76 +0x383\nmain.NewRootCommand.func1(0xc0001b8580, {0xc57a5e, 0x1, 0x1})\n        /home/dtrckd/src/i/git-bug-migration/root.go:44 +0x31\ngithub.com/spf13/cobra.(*Command).execute(0xc0001b8580, {0xc000032070, 0x1, 0x1})\n        /home/dtrckd/.go/pkg/mod/github.com/spf13/cobra@v1.0.0/command.go:842 +0x60e\ngithub.com/spf13/cobra.(*Command).ExecuteC(0xc0001b8580)\n        /home/dtrckd/.go/pkg/mod/github.com/spf13/cobra@v1.0.0/command.go:950 +0x3ad\ngithub.com/spf13/cobra.(*Command).Execute(...)\n        /home/dtrckd/.go/pkg/mod/github.com/spf13/cobra@v1.0.0/command.go:887\nmain.main()\n        /home/dtrckd/src/i/git-bug-migration/main.go:6 +0x1e\n\n```\n\nSame error if I repeat that command. After that crash, the error with git-bug changed, it is now like this:\n\n    $ git bug ls\n    Error: unknown cache format version 4\n\nAm I doing something wrong ?","files":null}]}